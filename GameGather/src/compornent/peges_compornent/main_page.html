<!DOCTYPE html>
<html lang = "ja">
<head>
    <meta charset = "UTF-8">
    <meta name = "viewport" content = "width=device-width, initial-scale = 1.0">
    
    <!--リセットCSS (Destyle.css) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/destyle.css@3.0.2/destyle.css">

    <!--Google font-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&display=swap" rel="stylesheet">

    <!--CSS読み込み-->

    <title>GameGatherホームページ</title>
</head>

<body>
    <div class="grid-container">
        <img class="item" src = "../assets/IMG_3496.JPG" width="100%"
                alt="icon">
        <div class="item">
            <h2>中央のエリア</h2>
            <p>ここにコンテンツが入ります。</p>
            <!-- 投稿一覧を表示するためのリスト -->
            <ul id="posts-list"></ul>
        </div>
        <div class="item">
            <h2>右のエリア</h2>
            <p>ここにコンテンツが入ります。</p>
        </div>
    </div>
    <script>
    // ページ読み込み時にFlask APIから投稿一覧を取得して表示する
    window.onload = function() {
        // Flaskサーバーの/api/postsエンドポイントにGETリクエストを送る
        fetch('http://localhost:5000/api/posts')
            .then(res => res.json()) // レスポンスをJSON形式で取得
            .then(posts => {
                // 投稿一覧を表示するul要素を取得
                const list = document.getElementById('posts-list');
                // 取得した投稿データを1件ずつリストに追加
                posts.forEach(post => {
                    const li = document.createElement('li');
                    // 投稿タイトルと内容を表示
                    li.textContent = post.title + ': ' + post.content;
                    list.appendChild(li);
                });
            });
    };
    </script>
</body>